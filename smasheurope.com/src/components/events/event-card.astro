---
import { getCollection,getEntry, CollectionEntry } from 'astro:content';
const dummyEntree = await getEntry('events', 'regen-2023');

export async function getStaticPaths() {
  const eventEntries = await getCollection('events');
  return eventEntries.map(post => ({
    params: { slug: post.slug }, props: { post },
  }));
}

// interface Props {
//   post: CollectionEntry<'events'>;
//   games: "";
//   image_src: "/assets/regen2023_banner.jpg";
//   title: "Event Name Year"; 
//   info: "Praesent luctus lacus in rutrum aliquet. Pellentesque tristique tortor id finibus mollis. Phasellus id leo ac ante luctus ultricies. Vestibulum molestie mi viverra."; 
//   month: "august";
//   start: 18;
//   end: 20;
//   city: "city";
//   country: "country";
//   trailer_url: "http://google.com";
//   reg_url: "https://start.gg";
//   event: CollectionEntry<'events'>; 
// }

const {
  games = "Game", 
  image_src = "/assets/regen2023_banner.jpg",
  title = "Event Name Year", 
  info = "Praesent luctus lacus in rutrum aliquet. Pellentesque tristique tortor id finibus mollis. Phasellus id leo ac ante luctus ultricies. Vestibulum molestie mi viverra.", 
  month = "august", 
  start = 18,
  end = 20,
  city = "city",
  country = "country",
  trailer_url = "http://google.com", 
  reg_url = "https://start.gg",
  event } = Astro.props;   

const { post } = Astro.props;
const { Content } = await post != undefined ? post.render() : dummyEntree.render();

// const { Content } = await post.render();
// const Content =  await entry.content;    
// const {Content } = await entry.render()
---

<div class="card">
  <span class="game">{games}</span>
  <div class="image">
    <img src={image_src}/>
  </div>
  <span>{title}</span>

  <!-- { event != undefined ? event.render() : ""; } -->
  { event != undefined ? event.body : "bla"}

  { Content != undefined ? <Content /> : "no content" } 
  
  <span>{month} {start}-{end}, {city}, {country}</span>
  <div class="buttons">
    <a href={trailer_url}>trailer</a>
    <a href={reg_url}>details</a>
  </div>
</div>

<style lang="scss">
  .card {
    background: rgb(152, 152, 232);
    display: flex;
    flex-direction: column;
    
    min-height: 200px;
    width: 400px;
    margin-bottom: 2em;

    border: 1px black solid;
    border-radius: 10px;

    @media screen and (max-width: 1000px) {
        width:100%;
    }

    span {
      width:100%;
      &.game {
        text-align: center;
      }
    }

    .image {
      width: 100%;
      img {
        width: 100%;
      }
    }
  }
</style>